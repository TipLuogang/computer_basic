1. 知识概要与学习计划  
    应用层、表示层、会话层
    传输层
    网络层
    数据链路层
    物理层

    应用层
    传输层
    网络层
    网络接口层

         a                                      b
        应用层                                应用层
        传输层              路由器             传输层
        网络层              网络层              网络层
        网络接口层          网络接口层          网络接口层  
    网络层：数据路由
    路由器：网络层重要设备，分为家庭路由器，企业路由器

    网络层ip协议相关：ip协议，子网划分，简单路由过程
    网络层其他协议：arp与rarp协议，icmp协议
    ip的路由算法：路由的概述，内部网关的路由协议，外部网关的路由协议

2. ip协议详解
    虚拟互连网络
        实际计算机网络时错综复杂的
        物理设备通过使用ip协议，屏蔽了物理网络之间的差异
        当网络中的主机使用ip协议连接时，则无需关注网络细节
        ip协议使得复杂的网络变成一个虚拟互连的网络
        ip协议使得网络层可以屏蔽底层细节而专注网络层的数据转发
        ip协议解决了在虚拟网络中数据报传输路径的问题
    ip协议
        mac地址：30-B4-9E-ED-85-CA的二进制展开应为：
            00110000-10110100-10011110-11101101-10000101-11001010   48位
        网络层的地址-ip地址：192.168.11.11
            1100 0000, 1010 1000, 0000 1011, 0000 1011    32位
            对于网络层来说，每一个网络设备都拥有一个唯一的ip地址
        mac地址：唯一，不可改变
        IP地址：网络环境变了就可能发生变化
        ip地址常使用点分十进制来表示：0~255，0~255，0~255，0~255
            114.114.114.114         1.1.1.1
            8.8.8.8                 255.255.255.255
            最多可表示2的32次方个ip地址：约42亿个

        ip数据报
            ip首部      ip数据报的数据
        
            1.  4位版本 4位首部长度 8位服务类型(TOS)        16位总长度(字节)
            2.          16位标识                         3位标志  13位片偏移
            3.  8位生存时间(TTL)   8位协议                16位首部校验和 
            4.                        32位源地址ip
            5.                        32位目的ip地址
                                    选项options(若有)
                                    ip数据   

            1. 对于ip协议的头部来说至少有20字节的长度，最大长度位60字节
            4位版本：ip协议版本，ipv4、ipv6
            4位首部长度：单位字节，最大长度位15*4=60字节
            16位总长度位：最大数值为65535（可能比MTU 1500要大， 大则分片处理数据报），表示ip数据报总长度（ip首部+ip数据）

            2. 3位标志：标志ip报文是否可分片
            片偏移：分片处理数据报的时候，记录当前数据帧保存的是第几个偏移的ip数据

            3. 8位生存时间TTL：表示ip数据报文在网络中的寿命，每经过一个设备，TTL减一，当TTL=0时，网络设备必须丢弃该报文
                    解决的是，当ip报文，在网络中找不到终点的时候，避免ip数据在网络中无限传输消耗带宽
            8位协议：表明ip数据所携带的具体数据是什么协议的（如：tcp(6)，udp(17)，ip(4), icmp，igmp，ospf）
            16位首部校验和：校验ip首部是否出错

            4. 发送ip数据报机器的ip
            5. 数据报要到达哪一个机器的ip地址

3. ip协议的转发流程
    a -- 网络1 -- 路由器 -- 网络2 -- 路由器 -- 网络3 -- b
    逐跳(hop-by-hop)

    路由表简介
        mac地址表
            MAC地址     硬件接口
            A              E1
            B              E2
            C              E3   

        路由表
            目的ip地址      下一跳ip地址
            ip1             ip4
            ip2             ip5
            ip3             ip6 
        计算机与路由器都拥有路由表

    ip协议的转发流程 
        a发出目的地位c的ip数据报，查询路由表发现下一跳为e
        a将数据报发送给e
        e查询路由表发现下一跳为f，将数据报发送给f
        f查询路由表发现目的地c直接连接，将数据报发送给c

    结合网络层、数据链路层理解：
        a发出目的地位c的ip数据报，查询路由表发现下一跳为e
        a将ip数据报交给数据链路层，并告知目的mac地址是e
        a数据链路层填充源mac地址a，和目的mac地址e
        a数据链路层通过物理层将数据发送给e

        e的数据链路层接收到数据帧，把帧数据交给网络层
        e查询路由表，发现下一跳为f
        e把数据报交给数据链路层，并告知目的mac地址为f
        e数据链路层封装数据帧（填充源mac地址e、目的mac地址f）并发送
        
        f的数据链路层接收到数据帧，把帧数据交给网络层
        f查询路由表，发现下一跳为c
        f把数据报交给数据链路层，并告知目的mac地址为c
        f的数据链路层封装数据帧（填充源mac地址f、目的mac地址c）并发送
    特点：
        数据帧每一跳的mac地址都在变化
        ip数据报每一跳的ip地址始终不变


